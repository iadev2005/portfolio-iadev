---
import Button from './Button.astro';
import View from '../icons/View.astro';
import Code from '../icons/Code.astro';
import Clock from '../icons/Clock.astro';
import CreatorTag from './CreatorTag.astro';
import Tag from './Tag.astro';

interface Props {
  title: string
  creator: string
  duration: string
  description: string
  image: string
  liveUrl?: string
  codeUrl?: string
  technologies: Array<{
    icon: any
    name: string
  }>
  tags?: string[]
}

const { 
  title, 
  creator,
  duration,
  description, 
  image, 
  liveUrl, 
  codeUrl,
  technologies,
  tags = [] 
} = Astro.props;
---

<article class="grid grid-cols-1 md:grid-cols-[1fr,1fr] gap-8 md:gap-16">
  <div class="flex flex-col gap-4">
    <img 
      src={image} 
      alt={`Captura de pantalla del curso ${title}`}
      class="rounded-2xl aspect-video object-cover w-full shadow-lg transition-transform duration-500 hover:scale-[1.02]"
    />
  </div>

  <div class="flex flex-col items-start">
    <div class="flex flex-col gap-2 w-full">
      <div class="flex flex-wrap gap-2 mb-2">
        {tags.map((tag) => {
          let variant: 'default' | 'success' | 'info' | 'warning' | 'purple' = 'default';
          const lowerTag = tag.toLowerCase();
          
          if (lowerTag.includes('frontend')) variant = 'purple';
          else if (lowerTag.includes('backend')) variant = 'purple';
          else if (lowerTag.includes('full')) variant = 'purple';
          
          return <Tag text={tag} variant={variant} />
        })}
      </div>
      <h3 class="text-2xl font-semibold text-black dark:text-white">{title}</h3>
    </div>
    
    <div class="flex items-center gap-x-4 mt-4">
      <CreatorTag creator={creator} />
      <div class="flex items-center gap-x-2 text-black/70 dark:text-white/70">
        <Clock class="size-5" />
        <span>{duration} horas</span>
      </div>
    </div>

    <p class="text-base text-black/70 dark:text-white/70 mt-4 leading-relaxed">
      {description}
    </p>

    <div class="flex gap-x-4 mt-8">
      {liveUrl && (
        <Button href={liveUrl}>
          Ver
          <View class="size-5" />
        </Button>
      )}
      
      {codeUrl && (
        <Button href={codeUrl} variant="outline">
          CÃ³digo
          <Code class="size-5" />
        </Button>
      )}
    </div>

    <footer class="flex flex-wrap gap-4 mt-8 pt-4 border-t border-black/10 dark:border-white/10 w-full">
      {technologies.map(tech => (
        <tech.icon 
          class="size-8 text-black/70 hover:text-black dark:text-white/70 dark:hover:text-white transition-colors" 
          title={tech.name}
        />
      ))}
    </footer>
  </div>
</article> 